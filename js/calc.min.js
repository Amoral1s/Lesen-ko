jQuery(document).ready((function(e){const t=document.querySelector("section.calc");if(!t)return;const n=t.querySelector(".calc-form .summ");function l(){const e=t.querySelectorAll("input"),l=t.querySelectorAll(".ranges .view-val");let c=[];e.forEach((e=>{e.checked&&c.push(e.value)})),l.forEach((e=>{const t=e.textContent.trim(),n=e.parentElement.querySelector("input").dataset.price.trim();let l=n.lastIndexOf(",");const o=(n.slice(0,l)+n.slice(l+1)).replace(/%/g,""),a=JSON.parse(o);let r=null;for(const[e,n]of a){if(e==t){r=n;break}if(!(t>=e))break;r=n}c.push(null!==r?r+"%":a[0][1]+"%")}));let o=0,a=0,r=0,s=!0;c.forEach((e=>{if(e.includes("%"))if(1==s){s=!1;let t=parseFloat(e.replace("%",""));r+=t}else{let t=parseFloat(e.replace("%",""));a+=t}else o+=parseFloat(e)})),o+=o*(r/100),o+=o*(a/100),n.textContent=o.toLocaleString("ru-RU"),console.log(o)}document.addEventListener("change",(()=>{l()}));const c=document.querySelectorAll('input[type="range"]');c.length>0&&c.forEach((t=>{let n=+t.dataset.min,c=+t.dataset.max,o=+t.dataset.step,a=+t.dataset.default;const r=t.parentElement.querySelector(".view-val");e(t).ionRangeSlider({skin:"round",type:"single",min:n,max:c,from:a,step:o,onChange:function(e){r.textContent=e.from,l()}})})),l(),e(".button.calculate-call").on("click",(function(){!function(){const e=t.querySelectorAll(".calc-item-wrap"),l=document.querySelector('input[name="calc_values"]');l.value="";let c=[];e.forEach((e=>{const t=e.querySelector(".title").textContent.trim(),n=e.querySelectorAll('input[type="radio"]'),l=e.querySelectorAll(".ranges-block .item");n.length>0&&n.forEach((e=>{if(e.checked){const n=e.nextElementSibling.querySelector("b").textContent.trim();c.push({key:t,value:n})}})),l.length>0&&l.forEach((e=>{const t=e.querySelector("p").textContent.trim(),n=e.querySelector(".view-val").textContent.trim();c.push({key:t,value:n})}))}));const o=n.textContent.trim();c.push({key:"Сумма калькулятора",value:o+" руб."});let a=c.map((e=>`${e.key}: ${e.value}`)).join("\n");l.value=a}(),e(".popup.popup-calc").fadeIn(200),e(".overlay").fadeIn(200),e("html").addClass("fixed")}));const o=document.querySelector(".calc.quiz");if(o){const r=o.querySelector(".quiz-line"),s=o.querySelectorAll(".quiz-step"),i=o.querySelector(".step-all"),u=o.querySelector(".step-now");s.length>0&&(s.forEach(((e,t)=>{const n=document.createElement("span");0==t&&n.classList.add("active"),r.appendChild(n)})),i.textContent=s.length,u.textContent=1);const d=document.querySelector(".back"),p=document.querySelector(".next");let y=0;const f=document.querySelectorAll(".quiz-line span");function a(){s.forEach(((e,t)=>{t===y?e.classList.add("active"):e.classList.remove("active")})),f.forEach(((e,t)=>{t===y?e.classList.add("active"):e.classList.remove("active")})),i.textContent=s.length,u.textContent=y+1,d.style.display=0===y?"none":"flex",y===s.length-1?p.style.display="none":p.style.display="flex"}d.addEventListener("click",(function(){y>0&&(y--,a())})),p.addEventListener("click",(function(){y<s.length-1&&(y++,a())})),a()}}));